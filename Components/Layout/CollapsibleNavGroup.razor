<!-- CollapsibleNavGroup.razor -->
<div class="nav-item px-3">
    <div class="nav-link d-flex justify-content-between align-items-center"
         @onclick="Toggle"
         style="cursor: pointer; border-radius: 0.375rem;">
        <span><i class="@Icon me-2"></i>@Title</span>
        <i class="bi @(IsExpanded ? "bi-chevron-down" : "bi-chevron-right") transition-chevron"></i>
    </div>

    <div class="collapse @(IsExpanded ? "show" : "")">
        <div class="ps-4 pt-2">
            @ChildContent
        </div>
    </div>
</div>

@code {
    private bool IsExpanded { get; set; }

    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "bi bi-folder-fill";
    [Parameter] public bool StartExpanded { get; set; } = false;
    [Parameter] public RenderFragment? ChildContent { get; set; }

    protected override void OnInitialized() => IsExpanded = StartExpanded;
    private void Toggle() => IsExpanded = !IsExpanded;
}